(function(t){function e(e){for(var a,r,s=e[0],c=e[1],l=e[2],d=0,h=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&h.push(o[r][0]),o[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(h.length)h.shift()();return n.push.apply(n,l||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],a=!0,s=1;s<i.length;s++){var c=i[s];0!==o[c]&&(a=!1)}a&&(n.splice(e--,1),t=r(r.s=i[0]))}return t}var a={},o={index:0},n=[];function r(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=a,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(i,a,function(e){return t[e]}.bind(null,a));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;n.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"0ddc":function(t,e,i){t.exports=i.p+"img/set_block_slide3.d9b23ac1.png"},"160b":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAfCAYAAACGVs+MAAAACXBIWXMAAAsSAAALEgHS3X78AAAAG3RFWHRTb2Z0d2FyZQBDZWxzeXMgU3R1ZGlvIFRvb2zBp+F8AAABdElEQVRIx+3WPWsVQRQG4GciKiiCEKsUItqk8YNUflTpY5Gf4B9QwU5BEGzFTqwu2IlFSKOlnaaJSCwSMIJaiI2gUfxAg6+FE7lFbtTdXLa5B5bhsOzOw5mdPVOSKKUcwH6sY6ffMVbHUq817MKOmq8neaVlFMxhtsU7dif53gbws45N422SiTaApzjRAvA1yZ7GgCT//1App/C4S8A43tX0S5K9XQI6qcBBvO4ScBTPulyCk1josgLTeNhlBU7j0WaAUspVnMEbXEryfhiAKTwZALiOKwg+4RZ6SVa3E3AMS4OWoJTyEodqugG5gbtJnm8HYBIrWwDOYr6vk27EB1xMcqcxoJRSMInlFv3jB84nud20AkfwQvv42AhQEWk5+f0kM40BFXFuwK3DuNx3qvrTurGKuSTXGn+EfwGM4Sb29e2Cz1jEPXyr8/aGBTiOC/V8uVaPfAubbP+hAaYwXbfpgy1+gEMD/GsLGAFGgBFgBOjBLxFNC8aYUBCyAAAAAElFTkSuQmCC"},2285:function(t,e,i){t.exports=i.p+"img/help_slide2.ae8f79b3.png"},2906:function(t,e,i){t.exports=i.p+"img/tutorial_slide4.8669987a.png"},"53be":function(t,e,i){t.exports=i.p+"img/set_block_slide1.5d1debf6.png"},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("2b0e"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("About")},n=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-app",{style:{background:t.colors.grey.lighten3}},[i("v-system-bar",{style:{background:t.colors.grey.darken1},attrs:{app:"",window:""}},[i("input",{ref:"input",attrs:{hidden:"",type:"file",accept:"image/png, image/jpeg"},on:{change:function(e){return t.selectedReadFile()}}}),i("v-btn",{attrs:{text:"","x-small":""},on:{click:t.btnClickRead}},[t._v("Load")]),i("v-btn",{attrs:{text:"","x-small":""},on:{click:t.btnClickSave}},[t._v("Save")]),i("v-btn",{attrs:{text:"","x-small":""},on:{click:t.btnClickConfig}},[t._v("Config")]),i("v-btn",{attrs:{text:"","x-small":""},on:{click:t.btnClickHelp}},[t._v("Help")]),i("v-spacer"),i("v-btn",{attrs:{icon:"","x-small":""},on:{click:t.btnClickToolHelp}},[i("v-icon",{staticStyle:{"margin-right":"0"}},[t._v("mdi-help-circle")])],1)],1),i("v-navigation-drawer",{style:{background:t.colors.grey.lighten1},attrs:{app:"",permanent:"","mini-variant":"","mini-variant-width":"56"}},[i("v-list",{attrs:{rounded:"",dense:"",nav:""}},[i("v-list-item-group",{attrs:{mandatory:"",color:"primary"},model:{value:t.selectedItem,callback:function(e){t.selectedItem=e},expression:"selectedItem"}},t._l(t.items,(function(e){return i("v-list-item",{key:e.icon},[i("v-icon",{on:{click:function(i){return t.setCursorMode(e.mode)}}},[t._v(t._s(e.icon))])],1)})),1)],1)],1),i("v-navigation-drawer",{style:{background:t.colors.grey.lighten1},attrs:{app:"",right:"",permanent:""},scopedSlots:t._u([{key:"append",fn:function(){return[i("v-card",{attrs:{tile:""}},[i("v-card-subtitle",[t._v("Original Image")]),i("PreviewCanvas",{attrs:{"image-bitmap":t.$store.state.originImage.imageBitmap}})],1)]},proxy:!0}])},[i("v-card",{attrs:{tile:""}},[i("PreviewCanvas",{attrs:{"image-bitmap":t.$store.state.image.imageBitmap}}),i("v-card-subtitle",[t._v("Preview")])],1),i("v-card",{attrs:{tile:""}},[i("v-subheader",[t._v("座標: "+t._s(t.mapPos))]),i("v-subheader",{staticStyle:{height:"24px"}},[t._v("ブロックID: "+t._s(t.$store.getters.currentBlockId))]),i("v-subheader",{staticClass:"text-truncate",staticStyle:{height:"24px"}},[t._v(t._s(t.$store.getters.currentBlockName))]),i("v-subheader",[t._v("明るさ: "+t._s(t.$store.getters.currentBrightnessName))])],1)],1),i("v-main",[i("v-container",{staticClass:"py-6 px-6",attrs:{fluid:""}},[i("v-row",[i("ColorPaletteCanvas")],1),i("v-row",{ref:"drawCanvas"},[i("DrawCanvas",{attrs:{"show-grid":t.showGrid,"show-custom-grid":t.showCustomGrid,"show-block-info":t.showBlockInfo}})],1)],1),i("ConvertImageDialog",{attrs:{dialog:t.dialog,"image-src":t.imageSrc},on:{close:t.closeConvertDialog}}),i("SaveDialog",{attrs:{dialog:t.saveDialog,"image-data":t.$store.state.image.imageData,"image-bitmap":t.$store.state.image.imageBitmap},on:{close:function(e){t.saveDialog=e}}}),i("ConfigDialog",{attrs:{dialog:t.configDialog},on:{close:t.closeConfigDialog}}),i("PrivacyPolicyDialog",{attrs:{dialog:t.privacyPolicyDialog},on:{close:function(e){t.privacyPolicyDialog=e}}}),i("TermsOfServiceDialog",{attrs:{dialog:t.termsOfServiceDialog},on:{close:function(e){t.termsOfServiceDialog=e}}}),i("TutorialDialog",{attrs:{dialog:t.tutorialDialog},on:{close:t.closeTutorialDialog}}),i("HowToSetBlockDialog",{attrs:{dialog:t.howToSetBlockDialog},on:{close:function(e){t.howToSetBlockDialog=e}}}),i("ToolHelpDialog",{attrs:{dialog:t.toolHelpDialog},on:{close:function(e){t.toolHelpDialog=e}}}),i("AboutDialog",{attrs:{dialog:t.aboutDialog},on:{close:function(e){t.aboutDialog=e}}}),i("HelpDialog",{attrs:{dialog:t.helpDialog},on:{clickTutorial:function(e){t.tutorialDialog=!0},clickHowToSetBlock:function(e){t.howToSetBlockDialog=!0},clickTermsOfService:function(e){t.termsOfServiceDialog=!0},clickPrivacyPolicy:function(e){t.privacyPolicyDialog=!0},clickAbout:function(e){t.aboutDialog=!0},close:function(e){t.helpDialog=e}}}),i("PrecautionBottomSheet",{attrs:{sheet:t.precautionBottomSheet},on:{confirm:t.confirmPrecaution,clickTermsOfService:function(e){t.termsOfServiceDialog=!0},clickPrivacyPolicy:function(e){t.privacyPolicyDialog=!0}}})],1),i("v-footer",{style:{background:t.colors.grey.lighten1},attrs:{app:"",height:"36",inset:"",padless:""}},[i("v-row",{attrs:{"no-gutters":"",align:"center"}},[i("v-btn",{staticClass:"ma-1",attrs:{icon:"",small:"",tile:""},on:{click:t.normalizeScale}},[i("v-icon",[t._v("mdi-fullscreen")])],1),i("v-btn-toggle",{attrs:{group:"",multiple:""}},[i("v-btn",{attrs:{icon:"",small:""},model:{value:t.showGrid,callback:function(e){t.showGrid=e},expression:"showGrid"}},[i("v-icon",[t._v("mdi-grid")])],1),i("v-btn",{attrs:{icon:"",small:""},model:{value:t.showCustomGrid,callback:function(e){t.showCustomGrid=e},expression:"showCustomGrid"}},[i("v-icon",[t._v("mdi-border-outside")])],1),i("v-btn",{attrs:{icon:"",small:""},model:{value:t.showBlockInfo,callback:function(e){t.showBlockInfo=e},expression:"showBlockInfo"}},[i("v-icon",[t._v("mdi-alert-box-outline")])],1)],1),i("v-spacer"),i("span",{staticClass:"ma-1"},[t._v(t._s(t.cursorPos))])],1)],1)],1)},s=[],c=(i("99af"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("canvas",{attrs:{width:"1024",height:"64"},on:{mousedown:t.mouseDown}})}),l=[],u=(i("b64b"),i("4160"),i("fb6a"),i("4ec9"),i("a9e3"),i("d3b7"),i("3ca3"),i("159b"),i("ddb0"),i("3835")),d=(i("96cf"),i("1da1")),h=i("d4ec"),g=i("bee2"),m=i("ade3"),f=function(){function t(e,i){var a=this;Object(h["a"])(this,t),Object(m["a"])(this,"enableColors",[]),Object.keys(t.COLOR_TO_BLOCK).forEach((function(o,n){Object.keys(t.COLOR_TO_BLOCK[o]).forEach((function(r,s){e[n]&&i[s]&&a.enableColors.push(t.COLOR_TO_BLOCK[o][r])}))}))}return Object(g["a"])(t,[{key:"convertImageData",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(e,i){var a,o,n,r,s,c,l,d=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(a=Math.min(e.width,1024),o=Math.min(e.height,1024),n=new ImageData(a,o),r={},s=0;s<o;s++)for(c=function(t){var o=4*(t+s*e.width),c=e.data.slice(o,o+3),l=Object(u["a"])(c,3),h=l[0],g=l[1],m=l[2],f=void 0;if(r["".concat(h,",").concat(g,",").concat(m)])f=r["".concat(h,",").concat(g,",").concat(m)];else{var v=99999999;d.enableColors.forEach((function(t){var e=i(h,g,m,t.r,t.g,t.b);e<v&&(v=e,f=t)})),r["".concat(h,",").concat(g,",").concat(m)]=f}var p=4*(t+s*a);n.data[p]=f.r,n.data[p+1]=f.g,n.data[p+2]=f.b,n.data[p+3]=255},l=0;l<a;l++)c(l);return t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})));function e(e,i){return t.apply(this,arguments)}return e}()}],[{key:"init",value:function(){var t=this;Object.keys(this.PALETTE).forEach((function(e){e=Number(e),t.COLOR_TO_BLOCK[e]=[],Object.keys(t.BRIGHTNESSES).forEach((function(i){i=Number(i);var a=Math.round(t.PALETTE[e][0]*t.BRIGHTNESSES[i]/255),o=Math.round(t.PALETTE[e][1]*t.BRIGHTNESSES[i]/255),n=Math.round(t.PALETTE[e][2]*t.BRIGHTNESSES[i]/255);t.COLOR_TO_BLOCK[e][i]={r:a,g:o,b:n},void 0===t.BLOCK_TO_COLOR[a]&&(t.BLOCK_TO_COLOR[a]=new Map),void 0===t.BLOCK_TO_COLOR[a][o]&&(t.BLOCK_TO_COLOR[a][o]=new Map),t.BLOCK_TO_COLOR[a][o][n]={blockId:e,brightnessIdx:i}}))}))}},{key:"getColor",value:function(t,e){return this.COLOR_TO_BLOCK[t][e]}},{key:"getBlock",value:function(t,e,i){return this.BLOCK_TO_COLOR[t][e][i]}},{key:"equals",value:function(t,e){return t.r===e.r&&t.g===e.g&&t.b===e.b}},{key:"euclid",value:function(t,e,i,a,o,n){return Math.sqrt(Math.pow(t-a,2)+Math.pow(e-o,2)+Math.pow(i-n,2))}},{key:"cie76",value:function(e,i,a,o,n,r){var s=t.rgb2Lab(e,i,a),c=Object(u["a"])(s,3),l=c[0],d=c[1],h=c[2],g=t.rgb2Lab(o,n,r),m=Object(u["a"])(g,3),f=m[0],v=m[1],p=m[2];return t.euclid(l,d,h,f,v,p)}},{key:"rgb2Lab",value:function(e,i,a){var o=t.rgb2xyz(e,i,a),n=Object(u["a"])(o,3),r=n[0],s=n[1],c=n[2];return t.xyz2Lab(r,s,c)}},{key:"rgb2xyz",value:function(t,e,i){t/=255,e/=255,i/=255,t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92;var a=.4124*t+.3576*e+.1805*i,o=.2126*t+.7152*e+.0722*i,n=.0193*t+.1192*e+.9505*i;return[a,o,n]}},{key:"xyz2Lab",value:function(t,e,i){t=100*t/95.047,i=100*i/108.883,t=t>.008856?Math.pow(t,1/3):7.787*t+4/29,e=e>.008856?Math.pow(e,1/3):7.787*e+4/29,i=i>.008856?Math.pow(i,1/3):7.787*i+4/29;var a=116*e-16,o=500*(t-e),n=200*(e-i);return[a,o,n]}}]),t}();Object(m["a"])(f,"PALETTE",{1:[127,178,56],2:[247,233,163],3:[199,199,199],4:[255,0,0],5:[160,160,255],6:[167,167,167],7:[0,124,0],8:[255,255,255],9:[164,168,184],10:[151,109,77],11:[112,112,112],12:[64,64,255],13:[143,119,72],14:[255,252,245],15:[216,127,51],16:[178,76,216],17:[102,153,216],18:[229,229,51],19:[127,204,25],20:[242,127,165],21:[76,76,76],22:[153,153,153],23:[76,127,153],24:[127,63,178],25:[51,76,178],26:[102,76,51],27:[102,127,51],28:[153,51,51],29:[25,25,25],30:[250,238,77],31:[92,219,213],32:[74,128,255],33:[0,217,58],34:[129,86,49],35:[112,2,0],36:[209,177,161],37:[159,82,36],38:[149,87,108],39:[112,108,138],40:[186,133,36],41:[103,117,53],42:[160,77,78],43:[57,41,35],44:[135,107,98],45:[87,92,92],46:[122,73,88],47:[76,62,92],48:[76,50,35],49:[76,82,42],50:[142,60,46],51:[37,22,16]}),Object(m["a"])(f,"BRIGHTNESSES",{0:255,1:220,2:180}),Object(m["a"])(f,"COLOR_TO_BLOCK",[]),Object(m["a"])(f,"BLOCK_TO_COLOR",new Map),f.init();var v={data:function(){return{canvasWidth:1020,canvasHeight:60,cellSize:20}},computed:{currentColorX:function(){return this.$store.state.currentColor?this.$store.state.currentColor.blockId-1:0},currentColorY:function(){return this.$store.state.currentColor?this.$store.state.currentColor.brightnessIdx:0},colorPaletteImageBitmap:function(){return this.$store.state.colorPaletteImageBitmap}},watch:{currentColorX:function(){this.draw()},currentColorY:function(){this.draw()},colorPaletteImageBitmap:function(){this.draw()}},methods:{draw:function(){if(this.colorPaletteImageBitmap){var t=this.ctx;t.clearRect(0,0,this.canvasWidth+4,this.canvasHeight+4);var e=this.colorPaletteImageBitmap.width,i=this.colorPaletteImageBitmap.height;t.drawImage(this.colorPaletteImageBitmap,2,2,e*this.cellSize,i*this.cellSize),t.strokeStyle="black",t.lineWidth=2,t.strokeRect(this.currentColorX*this.cellSize+1,this.currentColorY*this.cellSize+1,this.cellSize+2,this.cellSize+2)}},mouseDown:function(t){var e=Math.min(Math.floor(t.layerX/this.cellSize),Object.keys(f.PALETTE).length-1),i=Math.min(Math.floor(t.layerY/this.cellSize),Object.keys(f.BRIGHTNESSES).length-1);this.setCurrentColor(e,i)},setCurrentColor:function(t,e){this.$store.commit("setCurrentColor",{blockId:t+1,brightnessIdx:e})}},mounted:function(){this.ctx=this.$el.getContext("2d"),this.ctx.imageSmoothingEnabled=!1,this.setCurrentColor(0,0),this.draw(),this.$store.dispatch("calcColorPaletteImageBitmap")},updated:function(){this.ctx.imageSmoothingEnabled=!1,this.draw()}},p=v,b=i("2877"),w=Object(b["a"])(p,c,l,!1,null,"0f63028c",null),k=w.exports,x=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("canvas",{attrs:{width:t.canvasWidth,height:t.canvasHeight},on:{mousedown:t.mouseDown,mousemove:t.mouseMove,mouseup:t.mouseUp,mousewheel:t.mouseWheel}})},C=[],y=(i("d81d"),i("2909")),A=i("fc8c"),S=i.n(A),_=i("a39e"),I=i.n(_),B=i("160b"),O=i.n(B),D={props:{showGrid:{type:Boolean,default:!1},showCustomGrid:{type:Boolean,default:null},showBlockInfo:{type:Boolean,default:null}},data:function(){return{mode:null,brightnesses:[]}},watch:{cellSize:function(){this.setBlockInfo(),this.draw()},originX:function(){this.draw()},originY:function(){this.draw()},cursorX:function(){this.draw()},cursorY:function(){this.draw()},imageBitmap:function(){this.draw()},showGrid:function(){this.draw()},showCustomGrid:function(){this.draw()},showBlockInfo:function(){this.draw()},customGridSize:function(){this.draw()}},computed:{cellSize:function(){return this.$store.state.drawCellSize},originX:function(){return this.$store.state.drawOriginX},originY:function(){return this.$store.state.drawOriginY},cursorX:function(){return this.$store.state.cursorX},cursorY:function(){return this.$store.state.cursorY},imageWidth:function(){return this.$store.getters.imageWidth},imageHeight:function(){return this.$store.getters.imageHeight},imageData:function(){if(this.$store.state.image.imageData)return this.$store.state.image.imageData},imageBitmap:function(){if(this.$store.state.image.imageData)return this.$store.state.image.imageBitmap},canvasWidth:function(){return this.$vuetify.breakpoint.width},canvasHeight:function(){return this.$vuetify.breakpoint.height-140},customGridSize:function(){return this.$store.state.config.customGridSize}},methods:{draw:function(){if(this.imageBitmap){var t=this.ctx;t.clearRect(0,0,this.canvasWidth,this.canvasHeight);var e=this.cellSize;if(t.drawImage(this.imageBitmap,this.originX,this.originY,this.imageWidth*this.cellSize,this.imageHeight*this.cellSize),this.showBlockInfo&&this.cellSize>45){t.font="".concat(Math.round(e/5),"px sanserif");for(var i=Math.max(-Math.floor(this.originY/e)-1,0);i<this.imageHeight;i++)for(var a=Math.max(-Math.floor(this.originX/e)-1,0);a<this.imageWidth;a++){var o=a*e+this.originX,n=i*e+this.originY;if(o>this.canvasWidth||n>this.canvasHeight)break;var r=4*(a+i*this.imageWidth),s=this.$store.state.image.imageData.data.slice(r,r+3),c=Object(u["a"])(s,3),l=c[0],d=c[1],h=c[2],g=f.getBlock(l,d,h);t.fillText(g.blockId,o+e/6,n+e/3);var m=this.brightnesses[g.brightnessIdx];t.drawImage(m.icon,o+m.x,n+m.y,m.width,m.height)}}if(this.showGrid&&this.cellSize>15){t.strokeStyle="gray",t.lineWidth=1,t.beginPath(),t.setLineDash([this.cellSize/5,this.cellSize/5]);for(var v=Math.max(-Math.floor(this.originX/e),0);v<=this.imageWidth;v++){var p=v*e+this.originX;if(p>this.canvasWidth)break;t.moveTo(p,this.originY),t.lineTo(p,this.imageHeight*e+this.originY)}for(var b=Math.max(-Math.floor(this.originY/e),0);b<=this.imageHeight;b++){var w=b*e+this.originY;if(w>this.canvasHeight)break;t.moveTo(this.originX,w),t.lineTo(this.imageWidth*e+this.originX,w)}t.stroke()}if(this.showCustomGrid){t.strokeStyle="cyan",t.lineWidth=1,t.beginPath(),t.setLineDash([this.cellSize/5,this.cellSize/5]);for(var k=0;k<=this.imageWidth;k+=this.customGridSize){var x=k*e+this.originX;if(x>this.canvasWidth)break;t.moveTo(x,this.originY),t.lineTo(x,this.imageHeight*e+this.originY)}for(var C=0;C<=this.imageHeight;C+=this.customGridSize){var y=C*e+this.originY;if(y>this.canvasHeight)break;t.moveTo(this.originX,y),t.lineTo(this.imageWidth*e+this.originX,y)}t.stroke()}null!==this.cursorX&&null!==this.cursorY&&(t.strokeStyle="black",t.lineWidth=1,t.beginPath(),t.setLineDash([]),t.moveTo((this.cursorX+1)*e+this.originX,this.originY),t.lineTo((this.cursorX+1)*e+this.originX,this.imageHeight*e+this.originY),t.moveTo(this.originX,(this.cursorY+1)*e+this.originY),t.lineTo(this.imageWidth*e+this.originX,(this.cursorY+1)*e+this.originY),t.stroke())}},mouseDown:function(t){if(0===t.button)if(this.$store.state.spaceKey)this.mode="moveField";else switch(this.$store.state.cursorMode){case"move":this.mode="moveField";break;case"pencil":this.mode="draw",this.setCursor(t.layerX,t.layerY),this.$store.commit("setColor",{x:this.cursorX,y:this.cursorY}),this.$store.dispatch("calcImageBitmap");break;case"fill":this.setCursor(t.layerX,t.layerY),this.$store.commit("fillColor",{x:this.cursorX,y:this.cursorY}),this.$store.dispatch("calcImageBitmap")}else if(2===t.button){if(!this.imageData)return;var e=4*(this.cursorX+this.cursorY*this.imageWidth),i=this.imageData.data.slice(e,e+3),a=Object(u["a"])(i,3),o=a[0],n=a[1],r=a[2],s=f.getBlock(o,n,r);this.$store.commit("setCurrentColor",{blockId:s.blockId,brightnessIdx:s.brightnessIdx})}},mouseMove:function(t){var e=this.cursorX,i=this.cursorY;switch(this.mode){case"moveField":this.$store.commit("setDrawOriginX",this.originX+t.movementX),this.$store.commit("setDrawOriginY",this.originY+t.movementY);break;case"draw":this.setCursor(t.layerX,t.layerY),this.$store.commit("lineColor",{x1:e,y1:i,x2:this.cursorX,y2:this.cursorY}),this.$store.dispatch("calcImageBitmap");break;default:this.setCursor(t.layerX,t.layerY)}},mouseUp:function(){this.mode=null},mouseWheel:function(t){if(this.$store.state.spaceKey||"move"===this.$store.state.cursorMode){var e=(t.layerX-this.originX)/this.cellSize,i=(t.layerY-this.originY)/this.cellSize;t.deltaY<0?this.$store.commit("setDrawCellSize",Math.min(this.cellSize*Math.SQRT2,128)):this.$store.commit("setDrawCellSize",Math.max(this.cellSize/Math.SQRT2,1)),this.$store.commit("setDrawOriginX",t.layerX-e*this.cellSize),this.$store.commit("setDrawOriginY",t.layerY-i*this.cellSize)}},setCursor:function(t,e){var i=Math.floor((t-this.originX)/this.cellSize);(i<0||i>=this.imageWidth)&&(i=null),this.$store.commit("setCursorX",i);var a=Math.floor((e-this.originY)/this.cellSize);(a<0||a>=this.imageHeight)&&(a=null),this.$store.commit("setCursorY",a)},setBlockInfo:function(){var t=this;this.brightnesses.forEach((function(e){var i=[e.icon.width,e.icon.height],a=i[0],o=i[1];a>o?(e.width=t.cellSize/4,e.height=t.cellSize/4*o/a):(e.width=t.cellSize/4*a/o,e.height=t.cellSize/4),e.x=t.cellSize/2+(t.cellSize/2-e.width)/2,e.y=(t.cellSize/2-e.height)/2}))}},created:function(){var t=this,e=Object(y["a"])(new Array(3)).map((function(){return new Image}));e[0].src=S.a,e[1].src=I.a,e[2].src=O.a,e.forEach((function(e,i){t.brightnesses[i]={icon:e,width:0,height:0,x:0,y:0}}))},mounted:function(){this.ctx=this.$el.getContext("2d"),this.ctx.imageSmoothingEnabled=!1,this.$el.oncontextmenu=function(){return!1}},updated:function(){this.ctx.imageSmoothingEnabled=!1,this.draw()}},T=D,$=Object(b["a"])(T,x,C,!1,null,"5edcd239",null),E=$.exports,R=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("canvas",{ref:"canvas",attrs:{width:"256",height:"256"}})},V=[],X={props:{imageBitmap:{type:ImageBitmap,default:null}},watch:{imageBitmap:function(){this.draw()}},methods:{draw:function(){if(this.ctx.clearRect(0,0,256,256),this.imageBitmap){var t=this.imageBitmap.width,e=this.imageBitmap.height,i=0,a=256,o=0,n=256;t>e?(n=256*e/t,o=(256-n)/2):(a=256*t/e,i=(256-a)/2),this.ctx.drawImage(this.imageBitmap,i,o,a,n)}}},mounted:function(){this.ctx=this.$el.getContext("2d"),this.ctx.imageSmoothingEnabled=!1,this.draw()}},j=X,M=Object(b["a"])(j,R,V,!1,null,"0e0e7c2c",null),P=M.exports,Y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-row",{attrs:{justify:"center"}},[i("v-dialog",{attrs:{persistent:"",width:"1100","max-width":"1100"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-title",[i("span",[t._v("画像の読み込み")]),i("v-spacer"),i("v-btn",{attrs:{icon:""},on:{click:t.clickHelp}},[i("v-icon",[t._v("mdi-help-circle")])],1)],1),i("v-divider"),i("v-container",{attrs:{fluid:""}},[i("v-row",{attrs:{"no-gutters":""}},[i("v-col",{attrs:{cols:"2",sm:"2",md:"2"}},[i("v-select",{attrs:{label:"構造",items:t.selectConstruct.items,dense:"",outlined:""},on:{change:function(e){t.brightnesses=Array.from(e)}},model:{value:t.selectConstruct.default,callback:function(e){t.$set(t.selectConstruct,"default",e)},expression:"selectConstruct.default"}})],1),i("v-col",{attrs:{cols:"2",sm:"2",md:"2",offset:"4","offset-sm":"4","offset-md":"4"}},[i("v-select",{attrs:{label:"ブロックの種類",items:t.selectBlock.items,dense:"",outlined:""},on:{change:function(e){t.blocks=Array.from(e)}},model:{value:t.selectBlock.default,callback:function(e){t.$set(t.selectBlock,"default",e)},expression:"selectBlock.default"}})],1),i("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[i("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[i("canvas",t._g({ref:"canvas",attrs:{width:"1076",height:"120"},on:{mousedown:t.mouseDown,mousemove:t.mouseOver}},a))]}}]),model:{value:t.blockSampleTooltip,callback:function(e){t.blockSampleTooltip=e},expression:"blockSampleTooltip"}},[i("span",{domProps:{innerHTML:t._s(t.blockSamples[t.blockTooltipId])}})])],1),i("v-row",[i("v-spacer"),i("v-col",{attrs:{cols:"auto",sm:"auto",md:"auto"}},[i("v-list",[i("v-list-item",[i("PreviewCanvas",{attrs:{"image-bitmap":t.readingImageBitmap}})],1),i("v-list-item",[i("v-subheader",[t._v(t._s(t.warnImageSize))])],1)],1)],1),i("v-spacer"),i("v-col",{attrs:{cols:"4",sm:"4",md:"4","align-self":"center"}},[i("v-card",{attrs:{flat:""}},[i("v-card-text",{attrs:{align:"center"}},[i("v-select",{attrs:{label:"色の変換方法",items:t.selectColorDiffMethod.items,dense:"",outlined:""},on:{change:function(e){t.colorDiffMethod=e}},model:{value:t.selectColorDiffMethod.default,callback:function(e){t.$set(t.selectColorDiffMethod,"default",e)},expression:"selectColorDiffMethod.default"}}),i("v-icon",{attrs:{"x-large":""}},[t._v("mdi-arrow-right-bold")])],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{width:"150",loading:t.converting,disabled:t.convertDisabled},on:{click:t.clickConvert}},[t._v(" Convert ")]),i("v-spacer")],1)],1)],1),i("v-spacer"),i("v-col",{attrs:{cols:"auto",sm:"auto",md:"auto"}},[i("PreviewCanvas",{attrs:{"image-bitmap":t.convertingImageBitmap}})],1),i("v-spacer")],1)],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:t.clickCancel}},[t._v(" Cancel ")]),i("v-btn",{attrs:{color:"green darken-1",text:"",disabled:!t.convertingImageBitmap},on:{click:t.clickOk}},[t._v(" Ok ")])],1)],1)],1),i("ConvertImageHelpDialog",{attrs:{dialog:t.helpDialog},on:{close:function(e){t.helpDialog=e}}}),i("LoadImageFile",{attrs:{"image-src":t.imageSrc},on:{loaded:t.setReadingImageData}})],1)},L=[],z=(i("caad"),i("2532"),function t(){Object(h["a"])(this,t)});Object(m["a"])(z,"SAMPLES",{1:"草ブロック, スライムブロック",2:"砂岩, 砂, シラカバ木類, グロウストーン, エンドストーン, エンドストーンレンガ, ...",3:"クモの巣, キノコの柄, ベッド (頭)",4:"TNT, レッドストーンブロック, 溶岩, 炎",5:"氷, 薄氷, 氷塊, 青氷",6:"鉄ブロック, 醸造台, 重量用感圧板, 鉄のトラップドア, ランタン, 砥石, ...",7:"葉, 苗木, 花, キノコ, サトウキビ, 竹, ...",8:"雪ブロック, 羊毛, カーペット, 彩釉テラコッタ, コンクリート, ...",9:"粘土, 虫食い石（シルバーフィッシュ）",10:"土, 粗い土, 花崗岩, ジャングル木類, ...",11:"丸石, 石, 滑らかな石, 石レンガ, 安山岩, 砂利, ...",12:"水, コンブ, 海草, 気泡柱",13:"オーク木類, チェスト, 作業台, 樽, ...",14:"閃緑岩, クォーツブロック, シーランタン, シラカバ原木(側面)",15:"橙色(羊毛, カーペット, 彩釉テラコッタ, コンクリート), テラコッタ, アカシア木類, ...",16:"赤紫色(羊毛, カーペット, 彩釉テラコッタ, コンクリート), プルプァ, ...",17:"空色(羊毛, カーペット, 彩釉テラコッタ, コンクリート), ...",18:"黄色(羊毛, カーペット, 彩釉テラコッタ, コンクリート), スポンジ, ...",19:"黄緑色(羊毛, カーペット, 彩釉テラコッタ, コンクリート), スイカ, ...",20:"桃色(羊毛, カーペット, 彩釉テラコッタ, コンクリート), ノウサンゴ, ...",21:"灰色(羊毛, カーペット, 彩釉テラコッタ, コンクリート), 死んだサンゴ, ...",22:"薄灰色(羊毛, カーペット, 彩釉テラコッタ, コンクリート), ...",23:"青緑色(羊毛, カーペット, 彩釉テラコッタ, コンクリート), プリズマリン, ...",24:"紫色(羊毛, カーペット, 彩釉テラコッタ, コンクリート), 菌糸, ...",25:"青色(羊毛, カーペット, 彩釉テラコッタ, コンクリート), クダサンゴ, ...",26:"茶色(羊毛, カーペット, 彩釉テラコッタ, コンクリート), ダークオーク木類, ソウルサンド, ...",27:"緑色(羊毛, カーペット, 彩釉テラコッタ, コンクリート), ...",28:"赤色(羊毛, カーペット, 彩釉テラコッタ, コンクリート), レンガ, ...",29:"黒色(羊毛, カーペット, 彩釉テラコッタ, コンクリート), 黒曜石, ...",30:"金ブロック, 軽量用感圧版, 鐘",31:"プリズマリンレンガ, ダークプリズマリン, ダイアモンドブロック, ...",32:"ラピスラズリブロック",33:"エメラルドブロック",34:"マツ木類, オーク原木側面, ジャングル原木側面, ポドゾル, 焚き火",35:"ネザーラック, ネザーレンガ, マグマブロック, ...",36:"白色のテラコッタ",37:"橙色のテラコッタ",38:"赤紫色のテラコッタ",39:"空色のテラコッタ",40:"黄色のテラコッタ",41:"黄緑色のテラコッタ",42:"桃色のテラコッタ",43:"灰色のテラコッタ",44:"薄灰色のテラコッタ",45:"青緑色のテラコッタ",46:"紫色のテラコッタ",47:"青色のテラコッタ",48:"茶色のテラコッタ",49:"緑色のテラコッタ",50:"赤色のテラコッタ",51:"黒色のテラコッタ"}),Object(m["a"])(z,"SET_BLOCKS",{1:"minecraft:slime_block",2:"minecraft:sandstone",3:"minecraft:mushroom_stem",4:"minecraft:redstone_block",5:"minecraft:packed_ice",6:"minecraft:iron_block",7:"minecraft:oak_leaves",8:"minecraft:white_wool",9:"minecraft:clay",10:"minecraft:coarse_dirt",11:"minecraft:stone",12:"minecraft:water",13:"minecraft:oak_planks",14:"minecraft:quartz_block",15:"minecraft:orange_wool",16:"minecraft:magenta_wool",17:"minecraft:light_blue_wool",18:"minecraft:yellow_wool",19:"minecraft:lime_wool",20:"minecraft:pink_wool",21:"minecraft:gray_wool",22:"minecraft:light_gray_wool",23:"minecraft:cyan_wool",24:"minecraft:purple_wool",25:"minecraft:blue_wool",26:"minecraft:brown_wool",27:"minecraft:green_wool",28:"minecraft:red_wool",29:"minecraft:black_wool",30:"minecraft:gold_block",31:"minecraft:prismarine_bricks",32:"minecraft:lapis_block",33:"minecraft:emerald_block",34:"minecraft:spruce_planks",35:"minecraft:netherrack",36:"minecraft:white_terracotta",37:"minecraft:orange_terracotta",38:"minecraft:magenta_terracotta",39:"minecraft:light_blue_terracotta",40:"minecraft:yellow_terracotta",41:"minecraft:lime_terracotta",42:"minecraft:pink_terracotta",43:"minecraft:gray_terracotta",44:"minecraft:light_gray_terracotta",45:"minecraft:cyan_terracotta",46:"minecraft:purple_terracotta",47:"minecraft:blue_terracotta",48:"minecraft:brown_terracotta",49:"minecraft:green_terracotta",50:"minecraft:red_terracotta",51:"minecraft:black_terracotta"});var H=i("de98"),G=i.n(H),W=i("7b5c"),F=i.n(W),U=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("canvas",{ref:"canvas",attrs:{hidden:"",width:"1024",height:"1024"}})},K=[],Z={props:{imageSrc:{type:File,default:null}},data:function(){return{image:null}},watch:{imageSrc:function(){this.load()}},methods:{load:function(){var t=this,e=new FileReader;e.readAsDataURL(this.imageSrc),e.addEventListener("load",(function(){t.image=new Image,t.image.onload=function(){t.draw()},t.image.src=e.result}))},draw:function(){this.ctx.clearRect(0,0,1024,1024),this.ctx.drawImage(this.image,0,0);var t=this.ctx.getImageData(0,0,this.image.width,this.image.height);this.$emit("loaded",t)}},mounted:function(){this.ctx=this.$el.getContext("2d"),this.ctx.imageSmoothingEnabled=!1}},N=Z,Q=Object(b["a"])(N,U,K,!1,null,"4a86fb78",null),J=Q.exports,q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{width:t.slideWidth},on:{"click:outside":t.close},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-carousel",{attrs:{width:t.slideWidth,height:t.slideHeight},model:{value:t.slideIndex,callback:function(e){t.slideIndex=e},expression:"slideIndex"}},t._l(t.slides,(function(e,a){return i("v-carousel-item",{key:a,attrs:{width:t.slideWidth,height:t.slideHeight,src:e}})})),1)],1)},tt=[],et=i("2285"),it=i.n(et),at=i("a5a5"),ot=i.n(at),nt={props:{dialog:{type:Boolean,default:!1}},data:function(){return{slideIndex:0,slides:[it.a,ot.a],slideWidth:1179,slideHeight:770}},methods:{close:function(){this.slideIndex=0,this.$emit("close")}}},rt=nt,st=i("6544"),ct=i.n(st),lt=i("5e66"),ut=i("3e35"),dt=i("169a"),ht=Object(b["a"])(rt,q,tt,!1,null,"294c836a",null),gt=ht.exports;ct()(ht,{VCarousel:lt["a"],VCarouselItem:ut["a"],VDialog:dt["a"]});var mt={components:{ConvertImageHelpDialog:gt,PreviewCanvas:P,LoadImageFile:J},props:{dialog:{type:Boolean,default:!1},imageSrc:{type:File,default:null}},data:function(){return{converting:!1,convertDisabled:!1,selectBlock:{default:{text:"ベテラン",value:[!0,!0,!1,!0,!0,!0,!0,!0,!1,!0,!0,!1,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!1,!0,!1,!1,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0]},items:[{text:"ビギナー",value:[!0,!0,!1,!1,!1,!1,!0,!0,!1,!0,!0,!1,!0,!1,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!1,!1,!1,!1,!0,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]},{text:"ベテラン",value:[!0,!0,!1,!0,!0,!0,!0,!0,!1,!0,!0,!1,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!1,!0,!1,!1,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0]},{text:"全て",value:[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0]}]},selectConstruct:{default:{text:"平たん",value:[!1,!0,!1]},items:[{text:"平たん",value:[!1,!0,!1]},{text:"立体",value:[!0,!0,!0]}]},selectColorDiffMethod:{default:{text:"ユークリッド（簡易、軽い）",value:"euclid"},items:[{text:"ユークリッド（簡易、軽い）",value:"euclid"},{text:"Cie76（高品質、重い）",value:"cie76"}]},blocks:[!0,!0,!1,!0,!0,!0,!0,!0,!1,!0,!0,!1,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!1,!0,!1,!1,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],brightnesses:[!1,!0,!1],colorDiffMethod:"euclid",blockSampleTooltip:!1,blockTooltipId:null,readingImageData:null,readingImageBitmap:null,convertingImageData:null,convertingImageBitmap:null,warnImageSize:"",checkboxOnImage:null,checkboxOffImage:null,helpDialog:!1}},computed:{paletteImageBitmap:function(){return this.$store.state.colorPaletteImageBitmap},blockSamples:function(){var t=[];return Object.keys(z.SAMPLES).forEach((function(e){t[e]="ブロックID: ".concat(e,"<br>").concat(z.SAMPLES[e])})),t}},methods:{draw:function(){var t=this,e=this.ctx;void 0!==e&&(e.clearRect(0,0,1076,120),e.drawImage(this.paletteImageBitmap,35,50,20*this.paletteImageBitmap.width,20*this.paletteImageBitmap.height),e.strokeStyle="gray",e.lineWidth=1,e.beginPath(),e.moveTo(12,0),e.lineTo(12,45),e.moveTo(45,20),e.lineTo(45,1),e.lineTo(1045,1),e.lineTo(1045,20),e.stroke(),this.brightnesses.forEach((function(i,a){e.drawImage(i?t.checkboxOnImage:t.checkboxOffImage,1,20*a+49,22,22)})),this.blocks.forEach((function(i,a){e.drawImage(i?t.checkboxOnImage:t.checkboxOffImage,20*a+34,26,22,22)})))},setReadingImageData:function(t){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e.readingImageData=t,i.next=3,createImageBitmap(t);case 3:e.readingImageBitmap=i.sent,t.width>1024||t.height>1024?e.warnImageSize="※ 1024px以上は読み込み出来ません":e.warnImageSize="";case 5:case"end":return i.stop()}}),i)})))()},mouseDown:function(t){if(1<t.layerX&&t.layerX<22&&49<t.layerY&&t.layerY<20*this.brightnesses.length+49){var e=Math.floor((t.layerY-49)/20);if(e<0||e>=this.brightnesses.length)return;this.brightnesses[e]=!this.brightnesses[e]}else if(34<t.layerX&&t.layerX<20*this.blocks.length+34&&26<t.layerY&&t.layerY<48){var i=Math.floor((t.layerX-34)/20);if(i<0||i>=this.blocks.length)return;this.blocks[i]=!this.blocks[i]}this.convertDisabled=!(this.brightnesses.includes(!0)&&this.blocks.includes(!0)),this.draw()},mouseOver:function(t){if(34<t.layerX&&t.layerX<20*this.blocks.length+34&&26<t.layerY&&t.layerY<48){var e=Math.floor((t.layerX-34)/20);if(e<0||e>=this.blocks.length)return;this.blockSampleTooltip=!0,this.blockTooltipId=e+1}else this.blockSampleTooltip=!1,this.blockTooltipId=null},clickConvert:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.converting=!0,i=t,window.requestIdleCallback((function(){return Object(d["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=new f(i.blocks,i.brightnesses),t.t0=i.colorDiffMethod,t.next="euclid"===t.t0?4:"cie76"===t.t0?6:8;break;case 4:return a=f.euclid,t.abrupt("break",9);case 6:return a=f.cie76,t.abrupt("break",9);case 8:a=f.euclid;case 9:return t.next=11,e.convertImageData(i.readingImageData,a);case 11:return i.convertingImageData=t.sent,t.next=14,createImageBitmap(i.convertingImageData);case 14:i.convertingImageBitmap=t.sent,i.converting=!1;case 16:case"end":return t.stop()}}),t)})))()}));case 3:case"end":return e.stop()}}),e)})))()},clickOk:function(){this.$store.commit("setImageData",this.convertingImageData),this.$store.commit("setImageBitmap",this.convertingImageBitmap),this.$store.commit("setOriginImageBitmap",this.readingImageBitmap),this.resetImages(),this.close()},clickCancel:function(){this.resetImages(),this.close()},clickHelp:function(){this.helpDialog=!0},resetImages:function(){this.readingImageData=null,this.readingImageBitmap=null,this.convertingImageData=null,this.convertingImageBitmap=null},close:function(){this.$emit("close")}},mounted:function(){void 0!==this.$refs.canvas&&(this.ctx=this.$refs.canvas.getContext("2d"),this.ctx.imageSmoothingEnabled=!1),this.checkboxOnImage=new Image,this.checkboxOnImage.src=G.a,this.checkboxOffImage=new Image,this.checkboxOffImage.src=F.a,this.draw()},updated:function(){void 0!==this.$refs.canvas&&(this.ctx=this.$refs.canvas.getContext("2d"),this.ctx.imageSmoothingEnabled=!1),this.draw()}},ft=mt,vt=i("8336"),pt=i("b0af"),bt=i("99d9"),wt=i("62ad"),kt=i("a523"),xt=i("ce7e"),Ct=i("132d"),yt=i("8860"),At=i("da13"),St=i("0fd9"),_t=i("b974"),It=i("2fa4"),Bt=i("e0c7"),Ot=i("3a2f"),Dt=Object(b["a"])(ft,Y,L,!1,null,"fb41cfd4",null),Tt=Dt.exports;ct()(Dt,{VBtn:vt["a"],VCard:pt["a"],VCardActions:bt["a"],VCardText:bt["c"],VCardTitle:bt["d"],VCol:wt["a"],VContainer:kt["a"],VDialog:dt["a"],VDivider:xt["a"],VIcon:Ct["a"],VList:yt["a"],VListItem:At["a"],VRow:St["a"],VSelect:_t["a"],VSpacer:It["a"],VSubheader:Bt["a"],VTooltip:Ot["a"]});var $t=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-row",{attrs:{justify:"center"}},[i("v-dialog",{attrs:{width:"1140",height:"420"},on:{"click:outside":t.close},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-container",{attrs:{fluid:""}},[i("v-row",[i("v-col",{attrs:{align:"center",cols:"4",sm:"4",md:"4"}},[i("PreviewCanvas",{attrs:{"image-bitmap":t.imageBitmap}}),i("canvas",{ref:"canvas",attrs:{hidden:"",width:t.width,height:t.height}}),i("v-btn",{on:{click:t.downloadPng}},[t._v("画像をダウンロード")])],1),i("v-col",{attrs:{align:"center",cols:"7",sm:"7",md:"7"}},[i("v-textarea",{attrs:{label:"ブロック数","no-resize":"",rows:"8"},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),i("v-btn",{on:{click:t.downloadText}},[t._v("テキストファイルをダウンロード")])],1),t.debug?i("v-col",{attrs:{align:"center",cols:"1",sm:"1",md:"1"}},[i("v-btn",{attrs:{icon:"",elevation:"2"},on:{click:t.downloadFunction}},[i("v-icon",[t._v("mdi-function")])],1)],1):t._e()],1)],1)],1)],1)],1)},Et=[],Rt=(i("ac1f"),i("1276"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("2b3d"),i("c4e3")),Vt=i.n(Rt),Xt={components:{PreviewCanvas:P},props:{dialog:{type:Boolean,default:!1},imageData:{type:ImageData,default:null},imageBitmap:{type:ImageBitmap,default:null}},data:function(){return{text:"",debug:!1}},computed:{width:function(){return this.imageData?this.imageData.width:0},height:function(){return this.imageData?this.imageData.height:0}},watch:{dialog:function(){var t=this;if(this.dialog){for(var e=[],i=0;i<this.height;i++)for(var a=0;a<this.width;a++){var o=4*(a+i*this.width),n=this.imageData.data.slice(o,o+3),r=Object(u["a"])(n,3),s=r[0],c=r[1],l=r[2],d=f.getBlock(s,c,l).blockId;e[d-1]||(e[d-1]={id:d,count:0}),e[d-1].count+=1}e.sort((function(t,e){return t.count<e.count?1:-1})),this.text="",e.forEach((function(e){e&&(t.text+="ID#".concat(e.id,": ").concat(t.$store.state.config.blocks[e.id]," => ").concat(e.count,"\n"))}))}}},methods:{draw:function(){this.imageBitmap&&(this.ctx.clearRect(0,0,this.width,this.height),this.ctx.drawImage(this.imageBitmap,0,0))},downloadPng:function(){for(var t=this.$refs.canvas.toDataURL("image/png"),e=atob(t.split(",")[1]),i=new Uint8Array(e.length),a=0;a<e.length;a++)i[a]=e.charCodeAt(a);var o=new Blob([i.buffer],{type:"image/png"}),n=document.createElement("a");n.download="converted.png",n.href=URL.createObjectURL(o),n.click(),URL.revokeObjectURL(n.href)},downloadText:function(){var t=new Blob([this.text],{type:"text/plain"}),e=document.createElement("a");e.download="blocks.txt",e.href=URL.createObjectURL(t),e.click(),URL.revokeObjectURL(e.href)},downloadFunction:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var i,a,o,n,r,s,c,l,d,h,g,m,v,p,b,w,k,x,C;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(i=new Vt.a,i.folder("map_illustrator").folder("data").folder("map_illustrator").folder("functions"),i.file("map_illustrator/pack.mcmeta",'{"pack": {"pack_format": 1, "description": "datapack"}}'),a=t.$store.state.config.mapOriginX,o=t.$store.state.config.mapOriginZ,n="fill ".concat(a," 128 ").concat(o-1," ").concat(a+t.width," 128 ").concat(o-1," minecraft:stone\n"),c=1,l=1,d=0;d<t.width;d++)for(r=128,s=1,h=0;h<t.height;h++)g=4*(d+h*t.width),m=t.$store.state.image.imageData.data.slice(g,g+3),v=Object(u["a"])(m,3),p=v[0],b=v[1],w=v[2],k=f.getBlock(p,b,w),0===k.brightnessIdx?2===s?(s=0,r=128):r+=1:2===k.brightnessIdx&&(0===s?(s=2,r=128):r-=1),1===s&&(s=k.brightnessIdx),(r<=0||r>=255)&&console.log("err: [".concat(d," ").concat(r," ").concat(h,"]")),n+="setblock ".concat(d+a," ").concat(r," ").concat(h+o," ").concat(z.SET_BLOCKS[k.blockId],"\n"),c+=1,c>=65355&&(i.file("map_illustrator/data/map_illustrator/functions/fill".concat(l,".mcfunction"),n),c=0,n="",l+=1);return c>0&&i.file("map_illustrator/data/map_illustrator/functions/fill".concat(l,".mcfunction"),n),e.next=12,i.generateAsync({type:"blob"});case 12:x=e.sent,C=document.createElement("a"),C.download="minecraft_map_illust_function.zip",C.href=URL.createObjectURL(x),C.click(),URL.revokeObjectURL(C.href);case 18:case"end":return e.stop()}}),e)})))()},close:function(){this.$emit("close")}},mounted:function(){this.$refs.canvas&&(this.ctx=this.$refs.canvas.getContext("2d"),this.ctx.imageSmoothingEnabled=!1,this.draw())},updated:function(){this.$refs.canvas&&(this.ctx=this.$refs.canvas.getContext("2d"),this.ctx.imageSmoothingEnabled=!1,this.draw())}},jt=Xt,Mt=i("a844"),Pt=Object(b["a"])(jt,$t,Et,!1,null,"2c9ed5d0",null),Yt=Pt.exports;ct()(Pt,{VBtn:vt["a"],VCard:pt["a"],VCol:wt["a"],VContainer:kt["a"],VDialog:dt["a"],VIcon:Ct["a"],VRow:St["a"],VTextarea:Mt["a"]});var Lt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{scrollable:"",persistent:t.dirty,width:"740"},on:{"click:outside":function(e){t.dirty||t.close(!1)}},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-title",[i("span",[t._v("Configuration")]),i("v-spacer"),i("v-btn",{attrs:{icon:""},on:{click:t.clickHelp}},[i("v-icon",[t._v("mdi-help-circle")])],1)],1),i("v-divider"),i("v-card-text",{staticStyle:{height:"700px"}},[i("v-container",[i("v-row",{attrs:{"no-gutters":""}},[i("v-col",{attrs:{cols:"3",sm:"3",md:"3"}},[i("v-subheader",{attrs:{dence:""}},[t._v("カスタムグリッド幅")])],1),i("v-col",{attrs:{cols:"9",sm:"9",md:"9"}},[i("v-slider",{staticClass:"align-center",attrs:{dense:"",min:"5",max:"128"},scopedSlots:t._u([{key:"append",fn:function(){return[i("v-text-field",{staticStyle:{width:"64px"},attrs:{dense:"",type:"number"},model:{value:t.config.customGridSize,callback:function(e){t.$set(t.config,"customGridSize",e)},expression:"config.customGridSize"}})]},proxy:!0}]),model:{value:t.config.customGridSize,callback:function(e){t.$set(t.config,"customGridSize",e)},expression:"config.customGridSize"}})],1),i("v-col",{attrs:{cols:"3",sm:"3",md:"3"}},[i("v-subheader",{attrs:{dence:""}},[t._v("マップ左上座標")])],1),i("v-spacer"),i("v-col",{attrs:{cols:"2",sm:"2",md:"2"}},[i("v-text-field",{staticClass:"pr-2",attrs:{prefix:"X: ",dense:"",type:"number"},model:{value:t.config.mapOriginX,callback:function(e){t.$set(t.config,"mapOriginX",t._n(e))},expression:"config.mapOriginX"}})],1),i("v-col",{attrs:{cols:"2",sm:"2",md:"2"}},[i("v-text-field",{attrs:{prefix:"Z: ",dense:"",type:"number"},model:{value:t.config.mapOriginZ,callback:function(e){t.$set(t.config,"mapOriginZ",t._n(e))},expression:"config.mapOriginZ"}})],1),i("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[i("v-divider",{staticClass:"pb-4"})],1),t._l(Object.keys(t.config.blocks),(function(e){return[i("v-col",{key:e,attrs:{cols:"12",sm:"12",md:"12"}},[i("v-text-field",{attrs:{outlined:"",dense:"",label:"ブロックID:"+e},model:{value:t.config.blocks[e],callback:function(i){t.$set(t.config.blocks,e,i)},expression:"config.blocks[blockId]"}})],1)]}))],2)],1)],1),i("v-divider"),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){return t.close(!1)}}},[t._v(" Cancel ")]),i("v-btn",{attrs:{color:"green darken-1",text:"",disabled:!t.dirty},on:{click:function(e){return t.close(!0)}}},[t._v(" Ok ")])],1)],1),i("ConfigHelpDialog",{attrs:{dialog:t.helpDialog},on:{close:function(e){t.helpDialog=e}}})],1)},zt=[],Ht=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{width:t.slideWidth},on:{"click:outside":t.close},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-carousel",{attrs:{width:t.slideWidth,height:t.slideHeight},model:{value:t.slideIndex,callback:function(e){t.slideIndex=e},expression:"slideIndex"}},t._l(t.slides,(function(e,a){return i("v-carousel-item",{key:a,attrs:{width:t.slideWidth,height:t.slideHeight,src:e}})})),1)],1)},Gt=[],Wt=i("b0e9"),Ft=i.n(Wt),Ut={props:{dialog:{type:Boolean,default:!1}},data:function(){return{slideIndex:0,slides:[Ft.a],slideWidth:1179,slideHeight:770}},methods:{close:function(){this.slideIndex=0,this.$emit("close")}}},Kt=Ut,Zt=Object(b["a"])(Kt,Ht,Gt,!1,null,"5aa75dfb",null),Nt=Zt.exports;ct()(Zt,{VCarousel:lt["a"],VCarouselItem:ut["a"],VDialog:dt["a"]});var Qt={components:{ConfigHelpDialog:Nt},props:{dialog:{type:Boolean,default:!1}},data:function(){return{config:null,dirty:!1,helpDialog:!1}},watch:{dialog:function(){this.dialog&&this.init()},config:{handler:function(t,e){this.dirty||t!==e||(this.dirty=!0)},deep:!0}},methods:{init:function(){this.config=Object.assign({},this.$store.state.config),this.config.blocks=Object.assign({},this.$store.state.config.blocks),this.dirty=!1},clickHelp:function(){this.helpDialog=!0},close:function(t){var e=t?this.config:null;this.$emit("close",e)}},created:function(){this.init()}},Jt=Qt,qt=i("ba0d"),te=i("8654"),ee=Object(b["a"])(Jt,Lt,zt,!1,null,"1d798aba",null),ie=ee.exports;ct()(ee,{VBtn:vt["a"],VCard:pt["a"],VCardActions:bt["a"],VCardText:bt["c"],VCardTitle:bt["d"],VCol:wt["a"],VContainer:kt["a"],VDialog:dt["a"],VDivider:xt["a"],VIcon:Ct["a"],VRow:St["a"],VSlider:qt["a"],VSpacer:It["a"],VSubheader:Bt["a"],VTextField:te["a"]});var ae=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{width:"800"},on:{"click:outside":t.close},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-title",[t._v("プライバシーポリシー")]),i("v-card-text",[i("div",[i("div",{staticClass:"text-h6"},[t._v("アクセス解析ツールについて")]),i("p",{staticClass:"text-justify"},[t._v(" 当サイトでは、Google社によるアクセス解析ツール Google Analytics を利用しています。 Google Analytics は Cookie（クッキー）を使用して当サイトへの訪問状況を収集・記録・分析します。 これらの情報は匿名で収集されており、個人を特定するものではありません。 ")]),i("p",{staticClass:"text-justify"},[t._v(" Google Analytics は Cookie を無効にすることで収集を拒否することが出来ます。 お使いのブラウザの設定をご確認ください。 この規約に関しての詳細は "),i("a",{attrs:{href:"https://marketingplatform.google.com/about/analytics/terms/jp/",target:"_blank",rel:"noopener noreferrer"}},[t._v(" Google Analyticsの利用規約 ")]),t._v(" のページや "),i("a",{attrs:{href:"https://policies.google.com/privacy?hl=ja",target:"_blank",rel:"noopener noreferrer"}},[t._v(" Googleポリシーと規約 ")]),t._v(" ページ、 "),i("a",{attrs:{href:"https://policies.google.com/technologies/partner-sites?hl=ja",target:"_blank",rel:"noopener noreferrer"}},[t._v(" Googleのサービスを使用するサイトやアプリから収集した情報のGoogleによる使用 ")]),t._v(" ページをご覧ください。 ")])]),i("p",{staticClass:"text-justify"},[t._v("最終更新: 2021/03/05")])]),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:t.close}},[t._v("Close")])],1)],1)],1)},oe=[],ne={props:{dialog:{type:Boolean,default:!1}},methods:{close:function(){this.$emit("close")}}},re=ne,se=Object(b["a"])(re,ae,oe,!1,null,"0eb0101a",null),ce=se.exports;ct()(se,{VBtn:vt["a"],VCard:pt["a"],VCardActions:bt["a"],VCardText:bt["c"],VCardTitle:bt["d"],VDialog:dt["a"],VSpacer:It["a"]});var le=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{width:"800"},on:{"click:outside":t.close},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-title",[t._v("利用規約")]),i("v-card-text",[i("p",{staticClass:"text-justify"},[t._v(" 「minecraft-map-illustrator」（以下、当サイトとする）は、 "),i("a",{attrs:{href:"https://twitter.com/3nannannan",target:"_blank",rel:"noopener noreferrer"}},[t._v(" @3nannannan ")]),t._v(" （以下、当方とする）が管理、運営しています。 ")]),i("div",[i("div",{staticClass:"text-h6"},[t._v("注意事項")]),i("p",{staticClass:"text-justify"},[t._v(" 当サイトを利用される場合は、ここに記載した条件に準拠いただくものとします。 当サイトをご利用いただいた時点で、以下の利用条件のすべてに同意いただいたものとさせていただきます。 ")]),i("ol",[i("li",[t._v("当サイトは、お客様の便宜に供するためのものであり、お客様自身の責任において利用いただくことができるものとします")]),i("li",[t._v("第三者、または当方に損害や不利益を与える行為、第三者、または当方の信用や名誉を損なう行為は禁止します")]),i("li",[t._v("当サイトに収録、掲載されているコンテンツのレイアウト、デザインおよび構造に関する著作権は当方に帰属します")])])]),i("div",[i("div",{staticClass:"text-h6"},[t._v("免責事項")]),i("p",{staticClass:"text-justify"},[t._v(" 当サイトからのリンクやバナーなどで移動したサイトで提供される情報、サービス等について一切の責任を負いません。 当サイトの内容、機能等について細心の注意を払っておりますが、最新のものであるか、正確や安全であるか等について保証するものではありません。 また、当方は通知なく当サイトの情報の訂正、修正、追加、削除、サービスの停止等をいつでも行うことができるものとします。 当サイトのご利用により、万一、ご利用者様に何らかの不都合や損害等が発生したとしても、当方は一切の責任を負うものではありません。 ")])]),i("div",[i("div",{staticClass:"text-h6"},[t._v("リンクについて")]),i("p",{staticClass:"text-justify"},[t._v(" 当サイトはリンクフリーです。 リンクを掲載する場合の連絡も不要です。 但し、公序良俗に反したサイトからのリンクはお断り致します。 ")])]),i("p",{staticClass:"text-justify"},[t._v("最終更新: 2021/03/05")])]),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:t.close}},[t._v("Close")])],1)],1)],1)},ue=[],de={props:{dialog:{type:Boolean,default:!1}},methods:{close:function(){this.$emit("close")}}},he=de,ge=Object(b["a"])(he,le,ue,!1,null,"ba89f642",null),me=ge.exports;ct()(ge,{VBtn:vt["a"],VCard:pt["a"],VCardActions:bt["a"],VCardText:bt["c"],VCardTitle:bt["d"],VDialog:dt["a"],VSpacer:It["a"]});var fe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{width:t.slideWidth},on:{"click:outside":t.close},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-carousel",{attrs:{width:t.slideWidth,height:t.slideHeight},model:{value:t.slideIndex,callback:function(e){t.slideIndex=e},expression:"slideIndex"}},t._l(t.slides,(function(e,a){return i("v-carousel-item",{key:a,attrs:{width:t.slideWidth,height:t.slideHeight,src:e}})})),1)],1)},ve=[],pe=i("ffce"),be=i.n(pe),we=i("e6dd"),ke=i.n(we),xe=i("f3dc"),Ce=i.n(xe),ye=i("2906"),Ae=i.n(ye),Se={props:{dialog:{type:Boolean,default:!1}},data:function(){return{slideIndex:0,slides:[be.a,ke.a,Ce.a,Ae.a],slideWidth:864,slideHeight:640}},methods:{close:function(){this.slideIndex=0,this.$emit("close")}}},_e=Se,Ie=Object(b["a"])(_e,fe,ve,!1,null,"471132c0",null),Be=Ie.exports;ct()(Ie,{VCarousel:lt["a"],VCarouselItem:ut["a"],VDialog:dt["a"]});var Oe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{width:t.slideWidth},on:{"click:outside":t.close},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-carousel",{attrs:{width:t.slideWidth,height:t.slideHeight},model:{value:t.slideIndex,callback:function(e){t.slideIndex=e},expression:"slideIndex"}},t._l(t.slides,(function(e,a){return i("v-carousel-item",{key:a,attrs:{width:t.slideWidth,height:t.slideHeight,src:e}})})),1)],1)},De=[],Te=i("fe30"),$e=i.n(Te),Ee={props:{dialog:{type:Boolean,default:!1}},data:function(){return{slideIndex:0,slides:[$e.a],slideWidth:1179,slideHeight:770}},methods:{close:function(){this.slideIndex=0,this.$emit("close")}}},Re=Ee,Ve=Object(b["a"])(Re,Oe,De,!1,null,"9044d7a4",null),Xe=Ve.exports;ct()(Ve,{VCarousel:lt["a"],VCarouselItem:ut["a"],VDialog:dt["a"]});var je=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{width:t.slideWidth},on:{"click:outside":t.close},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-title",[t._v("ブロックの置き方")]),i("v-divider"),i("v-carousel",{attrs:{"show-arrows-on-hover":"",width:t.slideWidth,height:t.slideHeight},model:{value:t.slideIndex,callback:function(e){t.slideIndex=e},expression:"slideIndex"}},t._l(t.slides,(function(e,a){return i("v-carousel-item",{key:a,attrs:{width:t.slideWidth,height:t.slideHeight,src:e}})})),1)],1)],1)},Me=[],Pe=i("53be"),Ye=i.n(Pe),Le=i("a0ee"),ze=i.n(Le),He=i("0ddc"),Ge=i.n(He),We={props:{dialog:{type:Boolean,default:!1}},data:function(){return{slideIndex:0,slides:[Ye.a,ze.a,Ge.a],slideWidth:864,slideHeight:640}},methods:{close:function(){this.slideIndex=0,this.$emit("close")}}},Fe=We,Ue=Object(b["a"])(Fe,je,Me,!1,null,"7a229b84",null),Ke=Ue.exports;ct()(Ue,{VCard:pt["a"],VCardTitle:bt["d"],VCarousel:lt["a"],VCarouselItem:ut["a"],VDialog:dt["a"],VDivider:xt["a"]});var Ze=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{scrollable:"",width:"600"},on:{"click:outside":t.close},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-list",{attrs:{"max-height":"500"}},[i("v-card-title",[t._v("ヘルプ")]),i("v-divider"),i("v-list-item",{attrs:{link:""},on:{click:function(e){return t.$emit("clickTutorial")}}},[i("v-list-item-title",[t._v("はじめに")])],1),i("v-list-item",{attrs:{link:""},on:{click:function(e){return t.$emit("clickHowToSetBlock")}}},[i("v-list-item-title",[t._v("ブロックの置き方")])],1),i("v-list-item",{attrs:{link:""},on:{click:function(e){return t.$emit("clickTermsOfService")}}},[i("v-list-item-title",[t._v("利用規約")])],1),i("v-list-item",{attrs:{link:""},on:{click:function(e){return t.$emit("clickPrivacyPolicy")}}},[i("v-list-item-title",[t._v("プライバシーポリシー")])],1),i("v-list-item",{attrs:{link:""},on:{click:function(e){return t.$emit("clickAbout")}}},[i("v-list-item-title",[t._v("About")])],1)],1)],1)},Ne=[],Qe={props:{dialog:{type:Boolean,default:!1}},methods:{close:function(){this.$emit("close")}}},Je=Qe,qe=i("5d23"),ti=Object(b["a"])(Je,Ze,Ne,!1,null,"71712606",null),ei=ti.exports;ct()(ti,{VCardTitle:bt["d"],VDialog:dt["a"],VDivider:xt["a"],VList:yt["a"],VListItem:At["a"],VListItemTitle:qe["b"]});var ii=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{width:"400"},on:{"click:outside":t.close},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-title",[t._v("Minecraft Map Illustrator")]),i("v-card-text",[i("p",[t._v("Minecraft Map Illustrator")]),i("p",[t._v("last updated: 2021/03/09")]),i("p"),i("p",[t._v("Copyright © 2021 "),i("a",{attrs:{href:"https://twitter.com/3nannannan"}},[t._v("3nannannan")])])])],1)],1)},ai=[],oi={props:{dialog:{type:Boolean,default:!1}},methods:{close:function(){this.$emit("close")}}},ni=oi,ri=Object(b["a"])(ni,ii,ai,!1,null,"0e42047e",null),si=ri.exports;ct()(ri,{VCard:pt["a"],VCardText:bt["c"],VCardTitle:bt["d"],VDialog:dt["a"]});var ci=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-bottom-sheet",{attrs:{persistent:"","no-click-animation":""},model:{value:t.sheet,callback:function(e){t.sheet=e},expression:"sheet"}},[i("v-sheet",{staticClass:"text-center",attrs:{height:"200px"}},[i("div",{staticClass:"pt-6"},[t._v(" 当サイトを利用される場合は、 "),i("a",{on:{click:t.clickTermsOfService}},[t._v("利用規約")]),t._v(" と "),i("a",{on:{click:t.clickPrivacyPolicy}},[t._v("プライバシーポリシー")]),t._v(" に同意いただいたものとします。 ")]),i("v-btn",{staticClass:"mt-4",attrs:{text:"",color:"red"},on:{click:t.confirm}},[t._v(" 同意する ")])],1)],1)},li=[],ui={props:{sheet:{type:Boolean,default:!1}},methods:{clickTermsOfService:function(){this.$emit("clickTermsOfService")},clickPrivacyPolicy:function(){this.$emit("clickPrivacyPolicy")},confirm:function(){this.$emit("confirm")}}},di=ui,hi=i("288c"),gi=i("8dd9"),mi=Object(b["a"])(di,ci,li,!1,null,"9d516b28",null),fi=mi.exports;ct()(mi,{VBottomSheet:hi["a"],VBtn:vt["a"],VSheet:gi["a"]});var vi=i("fcf4"),pi={components:{ConvertImageDialog:Tt,SaveDialog:Yt,ConfigDialog:ie,PrivacyPolicyDialog:ce,TermsOfServiceDialog:me,TutorialDialog:Be,ToolHelpDialog:Xe,HowToSetBlockDialog:Ke,HelpDialog:ei,AboutDialog:si,PrecautionBottomSheet:fi,ColorPaletteCanvas:k,DrawCanvas:E,PreviewCanvas:P},data:function(){return{selectedItem:0,items:[{icon:"mdi-arrow-all",mode:"move"},{icon:"mdi-pencil",mode:"pencil"},{icon:"mdi-format-color-fill",mode:"fill"}],imageSrc:null,dialog:!1,saveDialog:!1,configDialog:!1,privacyPolicyDialog:!1,termsOfServiceDialog:!1,tutorialDialog:!1,toolHelpDialog:!1,howToSetBlockDialog:!1,helpDialog:!1,aboutDialog:!1,precautionBottomSheet:!1,showGrid:!1,showCustomGrid:!1,showBlockInfo:!1,roughGridSize:16,colors:vi["a"]}},computed:{cursorPos:function(){if(null!==this.$store.state.cursorX&&null!==this.$store.state.cursorY){var t=this.$store.state.cursorX+1,e=this.$store.state.cursorY+1;return"".concat(t,", ").concat(e)}return""},mapPos:function(){if(null!==this.$store.state.cursorX&&null!==this.$store.state.cursorY){var t=this.$store.state.config.mapOriginX+this.$store.state.cursorX,e=this.$store.state.config.mapOriginZ+this.$store.state.cursorY;return"".concat(t,", ").concat(e)}return""}},methods:{btnClickRead:function(){this.$refs.input.click()},btnClickSave:function(){this.$store.state.image.imageData&&(this.saveDialog=!0)},btnClickConfig:function(){this.configDialog=!0},btnClickHelp:function(){this.helpDialog=!0},btnClickToolHelp:function(){this.toolHelpDialog=!0},selectedReadFile:function(){this.$refs.input.files[0]&&(this.imageSrc=this.$refs.input.files[0],this.dialog=!0)},setCursorMode:function(t){this.$store.commit("setCursorMode",t)},closeConvertDialog:function(){this.dialog=!1,this.normalizeScale(),localStorage.tutorialToSetBlock||(this.howToSetBlockDialog=!0,localStorage.tutorialToSetBlock=!0)},closeConfigDialog:function(t){this.configDialog=!1,t&&this.$store.commit("setConfig",t)},closeTutorialDialog:function(){this.tutorialDialog=!1,localStorage.precautionsConfirmed||(this.precautionBottomSheet=!0)},confirmPrecaution:function(){this.precautionBottomSheet=!1,localStorage.precautionsConfirmed=(new Date).getTime(),localStorage.tutorial=!0},normalizeScale:function(){var t=this.$refs.drawCanvas.clientWidth,e=this.$refs.drawCanvas.clientHeight,i=this.$store.getters.imageWidth,a=this.$store.getters.imageHeight,o=Math.min(t/i,e/a);this.$store.commit("setDrawCellSize",o),this.$store.commit("setDrawOriginX",(t-i*o)/2),this.$store.commit("setDrawOriginY",(e-a*o)/2)}},mounted:function(){localStorage.tutorial||(this.tutorialDialog=!0)}},bi=pi,wi=i("7496"),ki=i("a609"),xi=i("553a"),Ci=i("1baa"),yi=i("f6c4"),Ai=i("f774"),Si=i("afd9"),_i=Object(b["a"])(bi,r,s,!1,null,"49099c4c",null),Ii=_i.exports;ct()(_i,{VApp:wi["a"],VBtn:vt["a"],VBtnToggle:ki["a"],VCard:pt["a"],VCardSubtitle:bt["b"],VContainer:kt["a"],VFooter:xi["a"],VIcon:Ct["a"],VList:yt["a"],VListItem:At["a"],VListItemGroup:Ci["a"],VMain:yi["a"],VNavigationDrawer:Ai["a"],VRow:St["a"],VSpacer:It["a"],VSubheader:Bt["a"],VSystemBar:Si["a"]});var Bi={name:"App",components:{About:Ii},methods:{onKeyDown:function(t){this.$store.state.spaceKey||"Space"!==t.code||this.$store.commit("setSpaceKey",!0)},onKeyUp:function(t){this.$store.state.spaceKey&&"Space"===t.code&&this.$store.commit("setSpaceKey",!1)}},mounted:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},destroyed:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)}},Oi=Bi,Di=Object(b["a"])(Oi,o,n,!1,null,null,null),Ti=Di.exports,$i=i("8c4f");a["a"].use($i["a"]);var Ei=[{path:"/",name:"App",component:Ii}],Ri=new $i["a"]({mode:"history",base:"",routes:Ei}),Vi=Ri,Xi=i("2f62");function ji(t,e,i){var a=4*(e+i*t.image.imageData.width);t.image.imageData.data[a]=t.currentColor.r,t.image.imageData.data[a+1]=t.currentColor.g,t.image.imageData.data[a+2]=t.currentColor.b}a["a"].use(Xi["a"]);var Mi=new Xi["a"].Store({state:{image:{imageData:null,imageBitmap:null},originImage:{imageBitmap:null},colorPaletteImageBitmap:null,currentColor:null,drawCellSize:4,drawOriginX:0,drawOriginY:0,cursorX:null,cursorY:null,cursorMode:"move",spaceKey:!1,config:{customGridSize:16,mapOriginX:-64,mapOriginZ:-64,blocks:Object.assign({},z.SAMPLES)}},getters:{imageWidth:function(t){return t.image.imageData?t.image.imageData.width:0},imageHeight:function(t){return t.image.imageData?t.image.imageData.height:0},currentBlock:function(t,e){if(null!==t.cursorX&&null!==t.cursorY&&null!==t.image.imageData){var i=4*(t.cursorX+t.cursorY*e.imageWidth),a=t.image.imageData.data.slice(i,i+3),o=Object(u["a"])(a,3),n=o[0],r=o[1],s=o[2];return f.getBlock(n,r,s)}return null},currentBlockId:function(t,e){var i=e.currentBlock;return i?i.blockId:""},currentBlockName:function(t,e){var i=e.currentBlockId;return i?t.config.blocks[i]:""},currentBrightnessName:function(t,e){var i=e.currentBlock;if(!i)return"";switch(i.brightnessIdx){case 0:return"明るい";case 1:return"普通";case 2:return"暗い"}return""}},mutations:{setSpaceKey:function(t,e){t.spaceKey=e},setCursorMode:function(t,e){t.cursorMode=e},setColorPaletteImageBitmap:function(t,e){t.colorPaletteImageBitmap=e},setImageData:function(t,e){t.image.imageData=e},setImageBitmap:function(t,e){t.image.imageBitmap=e},setOriginImageBitmap:function(t,e){t.originImage.imageBitmap=e},setCurrentColor:function(t,e){var i=e.blockId,a=e.brightnessIdx;t.currentColor=Object.assign(f.getColor(i,a),{blockId:i,brightnessIdx:a})},setDrawCellSize:function(t,e){t.drawCellSize=e},setDrawOriginX:function(t,e){t.drawOriginX=e},setDrawOriginY:function(t,e){t.drawOriginY=e},setCursorX:function(t,e){t.cursorX=e},setCursorY:function(t,e){t.cursorY=e},setColor:function(t,e){var i=e.x,a=e.y;null!==i&&null!==a&&ji(t,i,a)},lineColor:function(t,e){var i=e.x1,a=e.y1,o=e.x2,n=e.y2;if(null!==i&&null!==a&&null!==o&&null!==n){var r=Math.abs(i-o),s=Math.abs(a-n),c=i<o?1:-1,l=a<n?1:-1,u=r-s;while(i!==o||a!==n){var d=u<<1;d>-s&&(u-=s,i+=c),d<r&&(u+=r,a+=l),ji(t,i,a)}}},fillColor:function(t,e){var i=e.x,a=e.y;if(null!==i&&null!==a){var o=4*(i+a*t.image.imageData.width),n={r:t.image.imageData.data[o],g:t.image.imageData.data[o+1],b:t.image.imageData.data[o+2]};if(!f.equals(t.currentColor,n)){var r=[{x:i,y:a}],s=[];while(r.length>0){var c=r.pop();void 0===s[c.y]&&(s[c.y]=[]),void 0===s[c.y+1]&&(s[c.y+1]=[]),void 0===s[c.y-1]&&(s[c.y-1]=[]),o=4*(c.x+c.y*t.image.imageData.width);var l={r:t.image.imageData.data[o],g:t.image.imageData.data[o+1],b:t.image.imageData.data[o+2]};s[c.y][c.x]=f.equals(l,n),s[c.y][c.x]&&(c.x+1<t.image.imageData.width&&void 0===s[c.y][c.x+1]&&r.push({x:c.x+1,y:c.y}),c.x-1>=0&&void 0===s[c.y][c.x-1]&&r.push({x:c.x-1,y:c.y}),c.y+1<t.image.imageData.height&&void 0===s[c.y+1][c.x]&&r.push({x:c.x,y:c.y+1}),c.y-1>=0&&void 0===s[c.y-1][c.x]&&r.push({x:c.x,y:c.y-1}))}Object.keys(s).forEach((function(e){Object.keys(s[e]).forEach((function(i){s[e][i]&&ji(t,Number(i),Number(e))}))}))}}},setConfig:function(t,e){t.config=e}},actions:{calcColorPaletteImageBitmap:function(t){return Object(d["a"])(regeneratorRuntime.mark((function e(){var i,a,o,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=Object.keys(f.PALETTE).length,a=Object.keys(f.BRIGHTNESSES).length,o=new ImageData(i,a),Object.keys(f.PALETTE).forEach((function(t,e){Object.keys(f.BRIGHTNESSES).forEach((function(a,n){var r=f.getColor(t,a),s=4*(e+n*i);o.data[s]=r.r,o.data[s+1]=r.g,o.data[s+2]=r.b,o.data[s+3]=255}))})),e.next=6,createImageBitmap(o);case 6:n=e.sent,t.commit("setColorPaletteImageBitmap",n);case 8:case"end":return e.stop()}}),e)})))()},calcImageBitmap:function(t){return Object(d["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,createImageBitmap(t.state.image.imageData);case 2:i=e.sent,t.commit("setImageBitmap",i);case 4:case"end":return e.stop()}}),e)})))()},loadOriginImage:function(t,e){return Object(d["a"])(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.commit("setReadingImageData",e),i.next=3,createImageBitmap(e);case 3:a=i.sent,t.commit("setReadingImageBitmap",a);case 5:case"end":return i.stop()}}),i)})))()}},modules:{}}),Pi=i("f309");a["a"].use(Pi["a"]);var Yi=new Pi["a"]({});a["a"].config.productionTip=!1,new a["a"]({router:Vi,store:Mi,vuetify:Yi,render:function(t){return t(Ti)}}).$mount("#app")},"7b5c":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsSAAALEgHS3X78AAAAG3RFWHRTb2Z0d2FyZQBDZWxzeXMgU3R1ZGlvIFRvb2zBp+F8AAAAZ0lEQVRIx+3VoRGAQAxE0Z8KoIwrCDrB4pB0QkPQBVfBYsBxJsyZI+uzbyYiMUnUjLUFmFkCRqBz9mVgk7SXgPlD+ZNT0lICVgBJk2sdL/MBBBBAAL8Eqp/rBAxA7y2/H87R6E+ukQtibM3RRUiFFwAAAABJRU5ErkJggg=="},a0ee:function(t,e,i){t.exports=i.p+"img/set_block_slide2.4243bc3a.png"},a39e:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAUCAYAAADskT9PAAAACXBIWXMAAAsSAAALEgHS3X78AAAAG3RFWHRTb2Z0d2FyZQBDZWxzeXMgU3R1ZGlvIFRvb2zBp+F8AAAA6klEQVRIx+3UPUpDURCG4WeCK9EFCFpqoX1cgFi5AgXBwiIg2NqKVcAuWKQR3YCFTXrB1Nb+IVqoY3MUEROEeK/N/bo5M8O8DN+cyEx/qYjoYAHX2MrMm7H1FQDsYRtTeMABupk5rAWgQJygXcJXPGIfvcy8qgNgBR3MI76kbrGZmUeftTjHovr0hjvsZOZhlBW1/I/uA4Oyqrp1mpntiTwQEesjUtNYxcy39ycM0c/M3YlNOAKghTUsFY9luYIBjvFc5narApjFBl6K2fq4+OH8KwOYwzIucTbmA6wM4FetDUAD0AA0AB8A70OInc30wVApAAAAAElFTkSuQmCC"},a5a5:function(t,e,i){t.exports=i.p+"img/help_slide3.b7c8eeed.png"},b0e9:function(t,e,i){t.exports=i.p+"img/help_slide4.bf30dd35.png"},de98:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsSAAALEgHS3X78AAAAG3RFWHRTb2Z0d2FyZQBDZWxzeXMgU3R1ZGlvIFRvb2zBp+F8AAAA0klEQVRIx92VPQrCQBBG34i9rd7A2isI8QSC3sPWztJrBAv7gEFyBUmnJ9AyXsDPJoJIQv52UZxmi2XfW2aGGZOEz7D/EpjZGJgDg5a8O7CXdC4TrDvAX5FJ2pQJti7SImnlWnAFRr4EKRACU2DmWpACoaSHmQVA4FJQCG8iuAHDEvgJ2BXB6woOwBFYApO6P28iSCRFZmYfkkp4kxS9SxZAvw68aZFjSbGZ9fKHlfA2XZRIivL7SnjbNo3zM/jWqPgdgfdx3XXhZPnCufzpTvYRT29n19GWbAa4AAAAAElFTkSuQmCC"},e6dd:function(t,e,i){t.exports=i.p+"img/tutorial_slide2.60c26cd7.png"},f3dc:function(t,e,i){t.exports=i.p+"img/tutorial_slide3.32351814.png"},fc8c:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAWCAYAAAChWZ5EAAAACXBIWXMAAAsSAAALEgHS3X78AAAAG3RFWHRTb2Z0d2FyZQBDZWxzeXMgU3R1ZGlvIFRvb2zBp+F8AAAA+0lEQVRIx+3UIUtDURQH8N8z2GxGk19A0GgS62w2m0ksBpvBIFarmBSbKFpEv4JlfaDZPHAiwtC/5Qljosje3lZ22j33wv3dwz2nSGKYURTFPpbxjN0k7T/P1wA4xF657OAYp0meRgIoEbdo9KRecISLJI+jAKyVL5/r23rDdpLzyoCiKK6wPqAxJeSkCmAopRsn4C5JY1iAzb7teWxhti/fRQvXSQ6GWYFewBQ2sNKTe0UTl3iHJGd1ARawg0+0cYOHH7+wRsBi+foW7n9tgxoB/+vDCWACmAC+AWWvrmK6wlyvBPgox6dxAZpYqnB5N8nA1Sswk6RjTPEFoUCy1yIKXiAAAAAASUVORK5CYII="},fe30:function(t,e,i){t.exports=i.p+"img/help_slide1.0bf40797.png"},ffce:function(t,e,i){t.exports=i.p+"img/tutorial_slide1.2c25ea5f.png"}});
//# sourceMappingURL=index.6b2704b3.js.map